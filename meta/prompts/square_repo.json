{
  "task": "Square synesthetic-mcp repo with spec",
  "objective": "Resolve divergences between current code and docs/mcp_spec.md so implementation, tests, and docs are aligned.",
  "changes": {
    "core": {
      "discovery": "Remove fallback to tests/fixtures; keep env â†’ submodule only."
    },
    "validate": {
      "errors": "Return {ok:false, reason:'validation_failed', errors:[...]} when validation fails."
    },
    "stdio_main": {
      "unsupported": "Return {ok:false, reason:'unsupported', msg:'tool not implemented'} instead of omitting msg."
    },
    "requirements": {
      "packages": ["jsonschema", "httpx", "pytest"]
    },
    "tests": {
      "validate": "Update assertions to expect reason:'validation_failed' on invalid cases.",
      "unsupported": "Update assertions to expect msg field in unsupported responses.",
      "ordering": "Ensure tests assert deterministic schema/example listing and error ordering."
    },
    "docs": {
      "spec": "Confirm no fixture fallback, nested alias, minimal deps, and corrected error shapes are documented."
    }
  },
  "constraints": {
    "style": "KISS, deterministic, no speculation",
    "language": "Python >=3.11",
    "baseline": "Submodule is SSOT; tests must pass"
  },
  "exit_criteria": [
    "pytest -q passes",
    "No references to local fixtures remain",
    "Error responses include reason and msg per spec",
    "README and docs/mcp_spec.md match implementation"
  ]
}
